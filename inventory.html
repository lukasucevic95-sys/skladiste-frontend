const API_URL = "https://skladiste-app-production.up.railway.app";

const tableBody = document.querySelector("#inventoryTable tbody");
const searchInput = document.getElementById("search");
const messageEl = document.getElementById("message");

async function loadInventory() {
  const res = await fetch(`${API_URL}/products`, {
    headers: { Authorization: "Bearer tvoj-token" }
  });
  const data = await res.json();

  tableBody.innerHTML = "";
  data.forEach(p => {
    const row = document.createElement("tr");
    row.innerHTML = `<td>${p.barkod}</td><td>${p.naziv}</td><td>${p.kolicina}</td>`;
    tableBody.appendChild(row);
  });
}

searchInput.addEventListener("input", () => {
  const filter = searchInput.value.toLowerCase();
  Array.from(tableBody.rows).forEach(row => {
    const barkod = row.cells[0].innerText.toLowerCase();
    const naziv = row.cells[1].innerText.toLowerCase();
    row.style.display = (barkod.includes(filter) || naziv.includes(filter)) ? "" : "none";
  });
});

loadInventory();

